<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SATOMI.Pages.BrowserPage"
             BackgroundColor="Black">

    <Shell.TitleView>
        <Grid ColumnDefinitions="*, Auto" BackgroundColor="Black" ColumnSpacing="0" Padding="0">
            <Label Grid.Row="0" Grid.Column="0" x:Name="LblTitle" FontSize="Micro" HorizontalOptions="Start" VerticalOptions="CenterAndExpand" TextColor="White"/>
            <Button x:Name="BtnBack" ImageSource="ic_back.png" Text="Back" TextColor="White" Margin="2" HorizontalOptions="End" IsVisible="False" Clicked="BtnBack_Clicked"/>
        </Grid>
    </Shell.TitleView>

    <ScrollView>
        <VerticalStackLayout
            Spacing="0"
            Padding="0,0"
            VerticalOptions="StartAndExpand">
            <ListView x:Name="LstView" ItemsSource="{Binding DirInfo}" ItemTapped="LstView_ItemTapped" >
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <Grid Padding="10, 5, 10, 5" ColumnDefinitions="Auto, *, *, Auto, Auto">
                                <!-- アイコン -->
                                <Image Grid.Column="0"
                                   WidthRequest="36"
                                   HeightRequest="36"
                                   HorizontalOptions="Start"
                                   VerticalOptions="Center"
                                   Source="{Binding Icon}"
                                   Aspect="AspectFill"/>

                                <!-- 名前 -->
                                <Label Grid.Column="1"
                                   Padding="10,0,0,0"
                                   VerticalOptions="Center"
                                   Text="{Binding Name}"
                                   TextColor="White"
                                   FontAttributes="None" />

                                <!--情報--> 
                                <Label Grid.Column="2"
                                   Padding="0,0,10,0"
                                   IsVisible="{Binding IsNotSelected}"
                                   FontSize="Micro"
                                   HorizontalOptions="End"
                                   VerticalOptions="Center"
                                   Text="{Binding Info}"
                                   TextColor="White"
                                   FontAttributes="None" />

                                <!-- 選択ボタン -->
                                <Button Grid.Column="4"
                                    x:Name="BtnSelected"
                                    Padding="0"
                                    BackgroundColor="White"
                                    IsVisible="{Binding IsSelected}"
                                    WidthRequest="100"
                                    HeightRequest="30"
                                    VerticalOptions="Center"
                                    Text="Select"
                                    TextColor="Black"
                                    HorizontalOptions="Center"
                                    Clicked="BtnSelected_Clicked"/>
                            </Grid>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
